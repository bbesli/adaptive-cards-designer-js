<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Adaptive Card Designer</title>
  </head>
  <body>
    <div id="designerRootHost" style="width: 100%; height: 100vh"></div>
    <button id="saveCardButton">Save Card</button>

    <script type="module">
      import { initializeDesigner } from '../ac-designer-package/ac-designer-package.js';

      const sampleData = {
        title: 'Sample Title',
        description: 'Sample Description',
        additionalField: 'Additional Data',
      };

      const myAdaptiveCardJson = {
        type: 'AdaptiveCard',
        body: [
          {
            type: 'TextBlock',
            text: 'Hello, world!',
            size: 'large',
          },
        ],
        actions: [
          {
            type: 'Action.OpenUrl',
            title: 'Learn more',
            url: 'https://adaptivecards.io',
          },
        ],
      };

      window.onload = async function () {
        try {
          const designer = await initializeDesigner('designerRootHost', sampleData, myAdaptiveCardJson);

          document.getElementById('saveCardButton').addEventListener('click', () => {
            const cardPayload = designer.getCard(); // Use getCard to get the current card payload
            localStorage.setItem('savedCard', JSON.stringify(cardPayload));
            alert('Card saved!');
            window.location.href = 'page2.html'; // Redirect to page2.html
          });
        } catch (error) {
          console.error('Error initializing designer:', error);
        }
      };
    </script>
  </body>
</html>
